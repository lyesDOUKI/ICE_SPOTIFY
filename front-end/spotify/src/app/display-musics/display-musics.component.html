<div *ngIf="currentPlayingMusic" class="current-playing-music">
  Musique en cours de lecture : {{ currentPlayingMusic }}
</div>
<div class="music-item" *ngFor="let music of musicList; let i = index">
  <div class="left-content">
    <div class="title">{{ music }}</div>
    <div class="artist">{{ music }}</div>
  </div>
  <div class="play-container">
    <div>
      <!-- Utilisez une condition pour afficher le bouton de lecture, pause et stop en fonction de l'état -->
      <button class="play-btn" (click)="togglePlayPause(music, i)">
        <div *ngIf="isLoading && selectedMusicIndex === i" class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <div *ngIf="!isLoading">
          <ng-container *ngIf="selectedMusicIndex === i && isMusicPlaying
                                && music === currentPlayingMusic">
            <!-- Si la musique est en cours de lecture -->
            &#10073;&#10073;
          </ng-container>
          <ng-container *ngIf="selectedMusicIndex === i && !isMusicPlaying">
            <!-- Si la musique est en pause -->
            &#9658;
          </ng-container>
          <ng-container *ngIf="selectedMusicIndex === i &&
                     isMusicPlaying && music !== currentPlayingMusic">
            <!-- Si la musique est en pause -->
            &#9658;
          </ng-container>
          <ng-container *ngIf="selectedMusicIndex !== i">
            <!-- Si une autre musique est sélectionnée -->
            &#9658;
          </ng-container>
        </div>
      </button>
      <!-- Bouton Stop -->
      <button class="stop-btn" *ngIf="selectedMusicIndex === i && isMusicPlaying && music === currentPlayingMusic"
              (click)="stopMusic(music, i)">
        &#9632;
      </button>
    </div>
    <!-- Intégration de l'élément audio -->
    <div class="audio-container" #audioContainer>
    </div>
  </div>
  <div class="volume-container">
    <input type="range" min="0" max="1" step="0.01" [(ngModel)]="volumeList[i]" (input)="setVolume(i)"
           [disabled]="selectedMusicIndex !== i || currentPlayingMusic !== music" class="volume-bar">
  </div>
  <div class="action-icons">
    <button class="action-icon edit-icon" (click)="editMusic(music)">
      <!-- Icône de modification -->
      Modifier
    </button>
    <button class="action-icon delete-icon" (click)="deleteMusic(music)">
      <!-- Icône de suppression -->
      Supprimer
    </button>
  </div>
</div>
